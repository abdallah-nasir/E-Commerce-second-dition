{% extends 'base.html' %}
{% load i18n %}
{% load crispy_forms_tags %}
{% block content %}
<style type="text/css">
 
    
    .remove{
        background-color:#ff4500 !important;
    }
    #link{
        color:#fff;
        size:10px;
    }
    #wishlist{
    color:#ff4500;
    }
    #wishlist-same{
    color:#ff4500;
    }
   
    #wishlist-add:hover{
        cursor:pointer;
    }
    #wishlist:hover{
        cursor:pointer;
    }
#fas-heart{
padding-right:10px;
}
    </style>
 
        <div class="app-content">

            <!--====== Section 1 ======-->
            <div class="u-s-p-t-90">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-5">

                            <!--====== Product Breadcrumb ======-->
                            <div class="pd-breadcrumb u-s-m-b-30">
                                <ul class="pd-breadcrumb__list">
                                    <li class="has-separator">

                                        <a href="{% url 'home:home' %}">{% translate 'Home' %}</a></li>
                                    <li class="has-separator">

                                        <a href="{% url 'home:category_filter' slug=product.category.name %}">{{product.category.name}}</a></li>
                                    <li class="has-separator">

                                        <a href="{% url 'home:category_filter' slug=product.category.name %}">{{product.branch.child}}</a></li>
                                    <li class="is-marked">

                                        <a href="{% url 'home:this_product' id=product.id %}">{{product.name|title}}</a></li>
                                </ul>
                            </div>
                            <!--====== End - Product Breadcrumb ======-->


                            <!--====== Product Detail Zoom ======-->
                            <div class="pd u-s-m-b-30">
                                <div class="slider-fouc pd-wrap">
                                    <div id="pd-o-initiate">
                                        {% for i in product.image.all %}
                                        <div class="pd-o-img-wrap" data-src="{{i.image}}"><img class="u-img-fluid" src="{{i.image}}" data-zoom-image="{{i.image}}" alt=""></div>
                                        {% endfor %}

                                    </div>

                                    <span class="pd-text">{% translate 'Click for larger zoom' %}</span>
                                </div>
                                <div class="u-s-m-t-15">
                                    <div class="slider-fouc">
                                        <div id="pd-o-thumbnail">
                                            {% for i in product.image.all %}
                                            <div><img class="u-img-fluid" src="{{i.image}}" alt=""></div>
                                            
                                                    {% endfor %}

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--====== End - Product Detail Zoom ======-->
                        </div>
                        <div class="col-lg-7">

                            <!--====== Product Right Side Details ======-->
                            <div class="pd-detail">
                                <div>

                                    <span class="pd-detail__name">{{product.name|title}}</span></div>
                                <div>
                                    <div class="pd-detail__inline">

                                        <span class="pd-detail__price">${{product.discount}}</span>

                                        <span class="pd-detail__discount">({{product.discount_percent}}%{% translate 'OFF' %})</span><del class="pd-detail__del">${{product.price}}</del></div>
                                </div>
                                <div class="u-s-m-b-15">
                                    <div class="pd-detail__rating gl-rating-style">
                                        {% with ''|center:product.average.average as range %}
                                                        {% for _ in range %}
                                                        <i class="fas fa-star"> </i>
                                                     
                                                        {% endfor %}
                                                        {% if product.average.my_average %}
                                                        <i class="fas fa-star-half-alt"></i>

                                                        {% endif %}
                                                        {%endwith%}

                                        <span class="pd-detail__review u-s-m-l-4">

                                            <a id="counts-4" data-click-scroll="#view-review">{{details.count}}{% translate ' Reviews' %}</a></span></div>
                                </div>
                                <div class="u-s-m-b-15">
                                    <div class="pd-detail__inline">

                                        <span class="pd-detail__stock">{{product.stock}}{% translate ' in stock' %}</span>

                                        <span class="pd-detail__left">{% translate 'Only 2 left' %}</span></div>
                                </div>
                                <div class="u-s-m-b-15">

                                    <!-- <span class="pd-detail__preview-desc">{{product.details}}.</span></div> -->
                                <div class="u-s-m-b-15">
                                    <div class="pd-detail__inline">

                                        <span id="red-heart" class="pd-detail__click-wrap">
                                            {% if  product in wishlist.products.all %}
                                            <input class="wishlist-add-{{product.id}}" type="hidden" value="{{product.id}}">

                                            <a id="wishlist" data-index="{{product.id}}" data-tooltip="tooltip" data-placement="top" title="{% translate 'Remove From Wishlist' %}"><i id="fas-heart" class="fas fa-heart"></i>{% translate 'Remove from Wishlist' %}</a>
                                       
                                          {% else %}
                                          <input class="wishlist-add-{{product.id}}" type="hidden" value="{{product.id}}">
                                          <a  id="wishlist-add" data-index="{{product.id}}" data-tooltip="tooltip" data-placement="top" title="{% translate 'Add to Wishlist' %}"><i id="fas-heart" class="fas fa-heart"></i>{% translate 'Add to Wishlist' %} </a>
                                       
                                            {% endif %}
                                         

                                            </span>
                                        </div>
                                </div>
                                <div class="u-s-m-b-15">
                                    <div class="pd-detail__inline">

                                        <span class="pd-detail__click-wrap"><i class="far fa-envelope u-s-m-r-6"></i>

                                            <a href="{% url 'home:home' %}">{% translate 'Email me When the price drops' %}</a>

                                            <span class="pd-detail__click-count"></span></span></div>
                                </div>
                                <div class="u-s-m-b-15">
                                    <ul class="pd-social-list">
                                        <li>

                                            <a class="s-fb--color-hover" href="#"><i class="fab fa-facebook-f"></i></a></li>
                                        <li>

                                            <a class="s-tw--color-hover" href="#"><i class="fab fa-twitter"></i></a></li>
                                        <li>

                                            <a class="s-insta--color-hover" href="#"><i class="fab fa-instagram"></i></a></li>
                                        <li>

                                            <a class="s-wa--color-hover" href="#"><i class="fab fa-whatsapp"></i></a></li>
                                        <li>

                                            <a class="s-gplus--color-hover" href="#"><i class="fab fa-google-plus-g"></i></a></li>
                                    </ul>
                                </div>
                                <div class="u-s-m-b-15">
                                    <form id="add_form" class="pd-detail__form" action="{% url 'home:quick_add' id=product.id %}" method="POST">
                                        {% csrf_token %}
                                        <!-- <div class="u-s-m-b-15">

                                            <span class="pd-detail__label u-s-m-b-8">Color:</span>
                                            <div class="pd-detail__color">
                                                {% for i in product.color.all %}
                                                <div class="color__radio">
                                                    
                                                    <input type="radio" id="jet" value="{{i.id}}" name="color" required>

                                                    <label class="color__radio-label" for="jet" style="background-color: {{i.name}}"></label>
                                                </div>
                                              {% endfor %}
                                            </div>
                                        </div> -->
                                        <!-- <div class="u-s-m-b-15">

                                            <span class="pd-detail__label u-s-m-b-8">Size:</span>
                                            <div class="pd-detail__size">
                                                {% for i in product.size.all %}
                                                <div class="size__radio">

                                                    <input type="radio" id="xs" value="{{i.id}}" name="size" required>

                                                    <label class="size__radio-label" for="{{i.name}}">{{i.name}}</label>
                                                
                                                </div>
                                              {% endfor %}
                                            </div>
                                        </div> -->
                                        <div class="pd-detail-inline-2">
                                            <div class="u-s-m-b-15">

                                                <!--====== Input Counter ======-->
                                                <div class="input-counter">

                                                    <span class="input-counter__minus fas fa-minus"></span>

                                                    <input name="quantity" class="input-counter__text input-counter--text-primary-style" type="text" value="1" data-min="1" data-max="1000">

                                                    <span class="input-counter__plus fas fa-plus"></span></div>
                                                <!--====== End - Input Counter ======-->
                                            </div>
                                            <div class="u-s-m-b-15">

                                                <button  class="btn btn--e-brand-b-2" id="ajax-product" type="submit">{% translate 'Add to Cart' %}</button></div>
                                        </div>
                                    </form>

                                    <div id="test">

                                    </div>
                                </div>
                                <div class="u-s-m-b-15">

                                    <span class="pd-detail__label u-s-m-b-8">{% translate 'Product Policy' %}:</span>
                                    <ul class="pd-detail__policy-list">
                                        <li><i class="fas fa-check-circle u-s-m-r-8"></i>

                                            <span>{% translate 'Buyer Protection' %}.</span></li>
                                        <li><i class="fas fa-check-circle u-s-m-r-8"></i>

                                            <span>{% translate "Full Refund if you don't receive your order" %}.</span></li>
                                        <li><i class="fas fa-check-circle u-s-m-r-8"></i>

                                            <span>{% translate "Returns accepted if product not as described" %}.</span></li>
                                    </ul>
                                </div>
                            </div>
                            <!--====== End - Product Right Side Details ======-->
                        </div>
                    </div>
                </div>
            </div>

            <!--====== Product Detail Tab ======-->
            <div class="u-s-p-y-90">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="pd-tab">
                                <div class="u-s-m-b-30">
                                    <ul class="nav pd-tab__list">
                                        <li class="nav-item">

                                            <a class="nav-link" data-toggle="tab" href="#pd-desc">{% translate "DESCRIPTION" %}</a></li>
                                        <!-- <li class="nav-item">

                                            <a class="nav-link" data-toggle="tab" href="#pd-tag">TAGS</a></li> -->
                                        <li class="nav-item">

                                            <a class="nav-link active" id="view-review" data-toggle="tab" href="#pd-rev">{% translate "REVIEWS" %}

                                                <span id="counts-2">({{details.count}})</span></a></li>
                                    </ul>
                                </div>
                                <div class="tab-content">

                                    <!--====== Tab 1 ======-->
                                    <div class="tab-pane" id="pd-desc">
                                        <div class="pd-tab__desc">
                                            <div class="u-s-m-b-15">
                                                <h4>{% translate "PRODUCT INFORMATION" %}</h4>
                                            </div>
                                            <div class="u-s-m-b-15">
                                                <p>{{product.details}}</p>
                                            </div>
                                            <div class="u-s-m-b-30"><iframe src="https://www.youtube.com/embed/qKqSBm07KZk" allowfullscreen></iframe></div>
                                            <div class="u-s-m-b-30">
                                                <ul>
                                                    <li><i class="fas fa-check u-s-m-r-8"></i>

                                                        <span>{% translate "Buyer Protection" %}.</span></li>
                                                    <li><i class="fas fa-check u-s-m-r-8"></i>

                                                        <span>{% translate "Full Refund if you don't receive your order" %}.</span></li>
                                                    <li><i class="fas fa-check u-s-m-r-8"></i>

                                                        <span>{% translate "Returns accepted if product not as described" %}.</span></li>
                                                </ul>
                                            </div>
                                          
                                         
                                        </div>
                                    </div>
                                    <!--====== End - Tab 1 ======-->


                                    <!--====== Tab 2 ======-->
                                    <div class="tab-pane" id="pd-tag">
                                        <div class="pd-tab__tag">
                                            <h2 class="u-s-m-b-15">ADD YOUR TAGS</h2>
                                            <div class="u-s-m-b-15">
                                                <form>

                                                    <input class="input-text input-text--primary-style" type="text">

                                                    <button class="btn btn--e-brand-b-2" type="submit">ADD TAGS</button></form>
                                            </div>

                                            <span class="gl-text">Use spaces to separate tags. Use single quotes (') for phrases.</span>
                                        </div>
                                    </div>
                                    <!--====== End - Tab 2 ======-->


                                    <!--====== Tab 3 ======-->
                                    <div class="tab-pane fade show active" id="pd-rev">
                                        <div class="pd-tab__rev">
                                            <div class="u-s-m-b-30">
                                                <div class="pd-tab__rev-score">
                                                    {% for i in details|slice:"0:1" %}
                                                    <div class="u-s-m-b-8">
                                                        {% get_current_language as LANGUAGE_CODE %}
                                                        {% get_available_languages as LANGUAGES %}
                                                        {% get_language_info_list for LANGUAGES as languages %}
                                                        {% for language in languages %}
                                                        {% if language.code == "ar" %}
                                                    <h2 id="counts-3"> {% translate "Review(s)" %} {{details.count}} - {% translate '(Overall)' %} ({{product.average.average|floatformat:1}})</h2>
                                                        {% endif %}
                                                    {% endfor %}
                                                </div>
                                                    <div class="gl-rating-style-2 u-s-m-b-8">
                                                        {% with ''|center:product.average.average as range %}
                                                        {% for _ in range %}
                                                        <i class="fas fa-star"> </i>
                                                     
                                                        {% endfor %}
                                                        {% if product.average.my_average %}
                                                        <i class="fas fa-star-half-alt"></i>

                                                        {% endif %}
                                                        {%endwith%}
                                                        
                                                    </div>
                                                    {% endfor %}
                                                    <div class="u-s-m-b-8">
                                                        <h4>{% translate "We want to hear from you" %}!</h4>
                                                    </div>

                                                    <span class="gl-text">{% translate "Tell us what you think about this item" %}</span>
                                                </div>
                                            </div>

                                            <div class="u-s-m-b-30">
                                                <form id="comments-form" method="POST" class="pd-tab__rev-f1">
                                               {% csrf_token %}
                                                    <div class="rev-f1__group">
                                                        <div class="u-s-m-b-15">
                                                    
                                                        <h2 id="counts-1">{{details.count}} {% translate ' Review(s)' %}</h2>
                                                       
                                                        </div>
                                                        <div  class="u-s-m-b-15">

                                                            <label for="sort-review"></label>
                                                            <select  name="comments" class="select-box select-box--primary-style" id="sort-review">
                                                                <option value="1" {% if details_order == 1 %}selected {% endif %}>{% translate 'Sort by: Best Rating' %}</option>
                                                                <option value="2" {% if details_order == 2 %}selected {% endif %} >{% translate 'Sort by: Worst Rating' %}</option>
                                                            </select></div>
                                                    </div>
                                                    <div class="rev-f1__review">
                                                        <div id="comments-ajax">

                                                        </div>

                                                        {% for b in details %}
                                                        <div class="review-o u-s-m-b-15">
                                                            <div class="review-o__info u-s-m-b-8">
                                                                   
                                                                <span class="review-o__name">{{b.rate.user.username|title}}</span>
                                                               
                                                                <span class="review-o__date">{{b.date}}</span></div>
                                                            <div class="review-o__rating gl-rating-style u-s-m-b-8">
                                                                {% with ''|center:b.stars as range %}
                                                                {% for _ in range %}
                                                                <i class="fas fa-star"> </i>
                                                             
                                                                {% endfor %}
                                                                {% if b.average %}
                                                                <i class="fas fa-star-half-alt"></i>
        
                                                                {% endif %}
                                                                {%endwith%}
                                                                <span>({{b.stars}} {% translate 'of' %} 5 )</span></div>
                                                            <p class="review-o__text">{{b.review}}</p>
                                                        </div>
                                                        {% endfor %}
                                                         
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="u-s-m-b-30">
                                                <form class="pd-tab__rev-f2" id="post-form" method="POST">
                                                    {% csrf_token %}
                                                    <h2 class="u-s-m-b-15">{% translate 'Add a Review' %}</h2>

                                                    <div class="u-s-m-b-30">
                                                        <div class="rev-f2__table-wrap gl-scroll">
                                                            <table class="rev-f2__table">
                                                                <thead>
                                                                    <tr>
                                                                        <th>
                                                                            <div class="gl-rating-style-2"><i class="fas fa-star"></i>

                                                                                <span>(1)</span></div>
                                                                        </th>
                                                                        <th>
                                                                            <div class="gl-rating-style-2"><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>

                                                                                <span>(1.5)</span></div>
                                                                        </th>
                                                                        <th>
                                                                            <div class="gl-rating-style-2"><i class="fas fa-star"></i><i class="fas fa-star"></i>

                                                                                <span>(2)</span></div>
                                                                        </th>
                                                                        <th>
                                                                            <div class="gl-rating-style-2"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>

                                                                                <span>(2.5)</span></div>
                                                                        </th>
                                                                        <th>
                                                                            <div class="gl-rating-style-2"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>

                                                                                <span>(3)</span></div>
                                                                        </th>
                                                                        <th>
                                                                            <div class="gl-rating-style-2"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>

                                                                                <span>(3.5)</span></div>
                                                                        </th>
                                                                        <th>
                                                                            <div class="gl-rating-style-2"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>

                                                                                <span>(4)</span></div>
                                                                        </th>
                                                                        <th>
                                                                            <div class="gl-rating-style-2"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>

                                                                                <span>(4.5)</span></div>
                                                                        </th>
                                                                        <th>
                                                                            <div class="gl-rating-style-2"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>

                                                                                <span>(5)</span></div>
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        
                                                                        <td>

                                                                            <!--====== Radio Box ======-->
                                                                            <div class="radio-box">

                                                                                <input type="radio" value="1" id="star-1"  name="stars" >
                                                                                <div class="radio-box__state radio-box__state--primary">

                                                                                    <label class="radio-box__label" for="star-1"></label></div>
                                                                            </div>
                                                                            <!--====== End - Radio Box ======-->
                                                                        </td>
                                                                        <td>

                                                                            <!--====== Radio Box ======-->
                                                                            <div class="radio-box">

                                                                                <input type="radio" value="1.5" id="star-1.5" name="stars">
                                                                                <div class="radio-box__state radio-box__state--primary">

                                                                                    <label class="radio-box__label" for="star-1.5"></label></div>
                                                                            </div>
                                                                            <!--====== End - Radio Box ======-->
                                                                        </td>
                                                                        <td>

                                                                            <!--====== Radio Box ======-->
                                                                            <div class="radio-box">

                                                                                <input type="radio" id="star-2" value="2" name="stars">
                                                                                <div class="radio-box__state radio-box__state--primary">

                                                                                    <label class="radio-box__label" for="star-2"></label></div>
                                                                            </div>
                                                                            <!--====== End - Radio Box ======-->
                                                                        </td>
                                                                        <td>

                                                                            <!--====== Radio Box ======-->
                                                                            <div class="radio-box">

                                                                                <input type="radio" id="star-2.5" value="2.5" name="stars">
                                                                                <div class="radio-box__state radio-box__state--primary">

                                                                                    <label class="radio-box__label" for="star-2.5"></label></div>
                                                                            </div>
                                                                            <!--====== End - Radio Box ======-->
                                                                        </td>
                                                                        <td>

                                                                            <!--====== Radio Box ======-->
                                                                            <div class="radio-box">

                                                                                <input type="radio" id="star-3" value="3" name="stars">
                                                                                <div class="radio-box__state radio-box__state--primary">

                                                                                    <label class="radio-box__label" for="star-3"></label></div>
                                                                            </div>
                                                                            <!--====== End - Radio Box ======-->
                                                                        </td>
                                                                        <td>

                                                                            <!--====== Radio Box ======-->
                                                                            <div class="radio-box">

                                                                                <input type="radio" id="star-3.5" value="3.5" name="stars">
                                                                                <div class="radio-box__state radio-box__state--primary">

                                                                                    <label class="radio-box__label" for="star-3.5"></label></div>
                                                                            </div>
                                                                            <!--====== End - Radio Box ======-->
                                                                        </td>
                                                                        <td>

                                                                            <!--====== Radio Box ======-->
                                                                            <div class="radio-box">

                                                                                <input type="radio" id="star-4" value="4" name="stars">
                                                                                <div class="radio-box__state radio-box__state--primary">

                                                                                    <label class="radio-box__label" for="star-4"></label></div>
                                                                            </div>
                                                                            <!--====== End - Radio Box ======-->
                                                                        </td>
                                                                        <td>

                                                                            <!--====== Radio Box ======-->
                                                                            <div class="radio-box">
                                                                                <input type="radio" value="4.5" name="stars"  id="star-4.5" >
                                                                                <div class="radio-box__state radio-box__state--primary">

                                                                                    <label class="radio-box__label" for="star-4.5"></label></div>
                                                                            </div>
                                                                            <!--====== End - Radio Box ======-->
                                                                        </td>
                                                                        <td>

                                                                            <!--====== Radio Box ======-->
                                                                            <div class="radio-box">

                                                                                <input type="radio" value="5" id="star-5" name="stars">
                                                                                <div class="radio-box__state radio-box__state--primary">

                                                                                    <label class="radio-box__label" for="star-5"></label></div>
                                                                            </div>
                                                                            <!--====== End - Radio Box ======-->
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="rev-f2__group">
                                                        <div class="u-s-m-b-15">

                                                            <label class="gl-label" for="reviewer-text">{% translate 'YOUR REVIEW' %} *</label>
                                                            <textarea name="review" class="text-area text-area--primary-style" id="reviewer-text" required></textarea>
                                                        </div>
                                                        <!-- <div>
                                                            <p class="u-s-m-b-30">

                                                                <label class="gl-label" for="reviewer-name">NAME *</label>

                                                                <input class="input-text input-text--primary-style" name="review" type="text" id="reviewer-name"></p>
                                                            <p class="u-s-m-b-30">

                                                                <label class="gl-label" for="reviewer-email">EMAIL *</label>

                                                                <input class="input-text input-text--primary-style" name="email" type="text" id="reviewer-email"></p>
                                                        </div> -->
                                                    </div>
                                                    <div>

                                                        <button  value="{{product.id}}" data-index="{{product.id}}" class="btn btn--e-brand-shadow" type="submit">{% translate 'SUBMIT' %}</button></div>
                                                </form>

                                            </div>
                                        </div>
                                    </div>
                                    <!--====== End - Tab 3 ======-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--====== End - Product Detail Tab ======-->
            <div class="u-s-p-b-90">

                <!--====== Section Intro ======-->
                <div class="section__intro u-s-m-b-46">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="section__text-wrap">
                                    <h1 class="section__heading u-c-secondary u-s-m-b-12">{% translate 'CUSTOMER ALSO VIEWED' %}</h1>

                                    <span class="section__span u-c-grey">{% translate 'PRODUCTS THAT CUSTOMER VIEWED' %}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--====== End - Section Intro ======-->
                {% for i in same %}
                <!--====== Quick Look Modal ======-->
                <div class="modal fade same-{{i.id}}" id="quick-look">
                  <div class="modal-dialog modal-dialog-centered">
                      <div class="modal-content modal--shadow">
          
                          <button class="btn dismiss-button fas fa-times" type="button" data-dismiss="modal"></button>
                          <div class="modal-body">
                              <div class="row">
                                 
                                  <div class="col-lg-5">
          
                                      <!--====== Product Breadcrumb ======-->
                                      <div class="pd-breadcrumb u-s-m-b-30">
                                          <ul class="pd-breadcrumb__list">
                                              <li class="has-separator">
          
                                                  <a href="{% url 'home:home' %}">{% translate 'Home' %}</a></li>
                                              <li class="has-separator">
          
                                                  <a href="{% url 'home:category_filter' slug=i.category.name %}">{{i.category.name|title}}</a></li>
                                              <li class="has-separator">
          
                                                  <a href="{% url 'home:category_filter' slug=i.category.name %}">{{i.branch.child|title}}</a></li>
                                              <li class="is-marked">
          
                                                  <a href="{% url 'home:this_product' id=i.id %}">{{i.name|title}}</a></li>
                                          </ul>
                                      </div>
                                      <!--====== End - Product Breadcrumb ======-->
          
          
                                      <!--====== Product Detail ======-->
                                      <div class="pd u-s-m-b-30">
                                          <div class="pd-wrap">
                                              <div id="js-product-detail-modal">
                                                  <div>
          
                                                      <img class="u-img-fluid" src="{{i.image.first.image}}" alt=""></div>
                                                
                                              </div>
                                          </div>
                                          <div class="u-s-m-t-15">
                                              <div id="js-product-detail-modal-thumbnail">
                                                 
                                    
                                              </div>
                                          </div>
                                      </div>
                                      <!--====== End - Product Detail ======-->
                                  </div>
                                  <div class="col-lg-7">
          
                                      <!--====== Product Right Side Details ======-->
                                      <div class="pd-detail">
                                          <div>
          
                                              <span class="pd-detail__name">{{i.name|title}}</span></div>
                                          <div>
                                              <div class="pd-detail__inline">
          
                                                  <span class="pd-detail__price">${{i.discount}}</span>
                                             
                                                  <span class="pd-detail__discount">({{i.discount_percent}}% {% translate 'OFF' %}})</span><del class="pd-detail__del">${{i.price}}</del></div>
                                                 
                                              </div>
                                          <div class="u-s-m-b-15">
                                              <div class="pd-detail__rating gl-rating-style">
                                                  {% with ''|center:i.average.average as range %}
                                                  {% for _ in range %}
                                                  <i class="fas fa-star"> </i>
                                                          {% endfor %}
                                                  {%endwith%} 
                                                  {% if i.average.my_average %}
                                              <i class="fas fa-star-half-alt"></i>
                                                  {% endif %}
                                                 
          
                                                  <span class="pd-detail__review u-s-m-l-4">
          
                                                      <a href="{% url 'home:this_product' id=i.id %}">{{i.comments}}{% translate ' Reviews' %}</a></span></div>
                                          </div>
                                          <div class="u-s-m-b-15">
                                              <div class="pd-detail__inline">
          
                                                  <span class="pd-detail__stock">{{i.stock}}{% translate ' in stock' %}</span>
          
                                                  <span class="pd-detail__left">{% translate 'Only 2 left' %}</span></div>
                                          </div>
                                          <div class="u-s-m-b-15">
          
                                              <!-- <span class="pd-detail__preview-desc">{{i.details}}</span> -->
                                          </div>
                                          <div class="u-s-m-b-15">
                                              <div class="pd-detail__inline">
          
                                                  <div class="red-heart-{{i.id}}">
                                                                  
                                                                     
                                                      {% if  i in wishlist.products.all %}
                                                      <input class="wishlist-add-{{i.id}}" type="hidden" value="{{i.id}}">
          
                                                      <div id="wishlist" class="fas fa-heart" data-index="{{i.id}}" data-tooltip="tooltip" data-placement="top" title="{% translate 'Remove From Wishlist' %}"></div>
                                                 
                                                    {% else %}
                                                    <input class="wishlist-add-{{i.id}}" type="hidden" value="{{i.id}}">
                                                    <div  id="wishlist-add" class="fas fa-heart" data-index="{{i.id}}" data-tooltip="tooltip" data-placement="top" title="{% translate 'Add to Wishlist' %}"></div>
                                                 
                                                      {% endif %}
                                                 </div>
                                          </div>
                                          </div>
                                          <div class="u-s-m-b-15">
                                              <div class="pd-detail__inline">
          
                                                  <span class="pd-detail__click-wrap"><i class="far fa-envelope u-s-m-r-6"></i>
          
                                                      <a href="{% url 'home:home' %}">{% translate 'Email me When the price drops' %}</a>
          
                                                      <span class="pd-detail__click-count"></span></span></div>
                                          </div>
                                          <div class="u-s-m-b-15">
                                              <ul class="pd-social-list">
                                                  <li>
          
                                                      <a class="s-fb--color-hover" href="#"><i class="fab fa-facebook-f"></i></a></li>
                                                  <li>
          
                                                      <a class="s-tw--color-hover" href="#"><i class="fab fa-twitter"></i></a></li>
                                                  <li>
          
                                                      <a class="s-insta--color-hover" href="#"><i class="fab fa-instagram"></i></a></li>
                                                  <li>
          
                                                      <a class="s-wa--color-hover" href="#"><i class="fab fa-whatsapp"></i></a></li>
                                                  <li>
          
                                                      <a class="s-gplus--color-hover" href="#"><i class="fab fa-google-plus-g"></i></a></li>
                                              </ul>
                                          </div>
                                          <div class="u-s-m-b-15">
                                              <form class="pd-detail__form" method="POST" action="{% url 'home:quantity_add' id=i.id %}">
                                                 {% csrf_token %}
                                                  <div class="pd-detail-inline-2">
                                                      <div class="u-s-m-b-15">
          
                                                          <!--====== Input Counter ======-->
                                                          <div class="input-counter">
          
                                                              <span class="input-counter__minus fas fa-minus"></span>
          
                                                              <input name="quantity" class="input-counter__text input-counter--text-primary-style" type="text" value="1" data-min="1" data-max="1000">
          
                                                              <span class="input-counter__plus fas fa-plus"></span></div>
                                                          <!--====== End - Input Counter ======-->
                                                      </div>
                                                      <div class="u-s-m-b-15">
          
                                                          <button class="btn btn--e-brand-b-2" type="submit">{% translate 'Add to Cart' %}</button></div>
                                                  </div>
                                              </form>
                                          </div>
                                          <div class="u-s-m-b-15">
          
                                              <span class="pd-detail__label u-s-m-b-8">{% translate 'Product Policy' %}:</span>
                                              <ul class="pd-detail__policy-list">
                                                  <li><i class="fas fa-check-circle u-s-m-r-8"></i>
          
                                                      <span>{% translate 'Buyer Protection' %}.</span></li>
                                                  <li><i class="fas fa-check-circle u-s-m-r-8"></i>
          
                                                      <span>{% translate "Full Refund if you don't receive your order" %}.</span></li>
                                                  <li><i class="fas fa-check-circle u-s-m-r-8"></i>
          
                                                      <span>{% translate 'Returns accepted if product not as described' %}.</span></li>
                                              </ul>
                                          </div>
                                      </div>
                                      <!--====== End - Product Right Side Details ======-->
                                  </div>
                                 
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
              <!--====== End - Quick Look Modal ======-->
          <!--====== Add to Cart Modal ======-->
          <div class="modal fade" id="add-to-cart-{{i.id}}">
          <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content modal-radius modal-shadow">
          
                  <button class="btn dismiss-button fas fa-times" type="button" data-dismiss="modal"></button>
                  <div class="modal-body">
                      <div class="row">
                          <div class="col-lg-6 col-md-12">
                              <div class="success u-s-m-b-30">
                                  <div class="success__text-wrap"><i class="fas fa-check"></i>
          
                                      <span>{% translate 'Item is added successfully' %}!</span></div>
                                  <div class="success__img-wrap">
          
                                      <img class="u-img-fluid" src="{{i.image.first.image}}" alt=""></div>
                                  <div class="success__info-wrap">
          
                                      <span class="success__name">{{i.name|title}}</span>
          
                                      <span class="success__quantity">{% translate 'Quantity: 1' %}</span>
          
                                      <span class="success__price">${{i.price}}</span></div>
                              </div>
                          </div>
                          <div class="col-lg-6 col-md-12">
                              <div class="s-option">
          
                                  <span class="s-option__text">{% translate '1 item (s) in your car' %}t</span>
                                  <div class="s-option__link-box">
          
                                      <a class="s-option__link btn--e-white-brand-shadow"  data-dismiss="modal">{% translate 'CONTINUE SHOPPING' %}</a>
          
                                      <a class="s-option__link btn--e-white-brand-shadow" href="{% url 'home:cart' %}">{% translate 'VIEW CART' %}</a>
                                    {% if request.user.is_authenticated %}
                                      <a class="s-option__link btn--e-brand-shadow" href="{% url 'home:order' cart.id %}">{% translate 'PROCEED TO CHECKOU' %}T</a></div>
                                    {% else %}
                                    <a class="s-option__link btn--e-brand-shadow" href="{% url 'account_login' %}">{% translate 'PROCEED TO CHECKOU' %}T</a></div>

                                    {% endif %}
                                    
                                    </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          </div>
          <!--====== End - Add to Cart Modal ======-->
              {% endfor %}

                <!--====== Section Content ======-->
                <div class="section__content">
                    <div class="container">
                        <div class="slider-fouc">
                            <div class="owl-carousel product-slider" data-item="4">
                                {% for i in same %}
                                <div class="u-s-m-b-30">
                                    <div class="product-o product-o--hover-on">
                                        <div class="product-o__wrap">

                                            <a class="aspect aspect--bg-grey aspect--square u-d-block" href="{% url 'home:this_product' id=i.id %}">

                                                <img class="aspect__img" src="{{i.image.first.image}}" alt=""></a>
                                            <div class="product-o__action-wrap">
                                                <ul class="product-o__action-list">
                                                    <li>

                                                        <a data-modal="modal" data-modal-id=".same-{{i.id}}" data-tooltip="tooltip" data-placement="top" title="{% translate 'Quick View' %}"><i class="fas fa-search-plus"></i></a></li>
                                                    <li>
                                                        <input type="hidden" class="product-id-{{i.id}}"  value="{{i.id}}">

                                                        <a data-modal="modal"  value="{{i.id}}" data-index="{{i.id}}" id="ajax-same" data-modal-id="#add-to-cart-{{i.id}}" data-tooltip="tooltip" data-placement="top" title="{% translate 'Add to Cart' %}"><i class="fas fa-plus-circle"></i></a></li>
                                                        <li class="red-heart-{{i.id}}">
                                                            {% if  i in wishlist.products.all %}
                                                            <input class="wishlist-add-{{i.id}}" type="hidden" value="{{i.id}}">
            
                                                            <a id="wishlist-same" data-index="{{i.id}}" data-tooltip="tooltip" data-placement="top" title="{% translate 'Remove From Wishlist' %}"><i class="fas fa-heart"></i></a>
                                                       
                                                          {% else %}
                                                          <input class="wishlist-add-{{i.id}}" type="hidden" value="{{i.id}}">
                                                          <a  id="wishlist-same-add"  data-index="{{i.id}}" data-tooltip="tooltip" data-placement="top" title="{% translate 'Add to Wishlist' %}"><i class="fas fa-heart"></i></a>
                                                       
                                                            {% endif %}
                                                      
                                                <!-- <a href="signin.html" data-tooltip="tooltip" data-placement="top" title="Add to Wishlist"><i class="fas fa-heart"></i></a> -->
                  
                                                        </li>
                                                    <li>

                                                        <a href="{% url 'home:home' %}" data-tooltip="tooltip" data-placement="top" title="{% translate 'Email me When the price drops' %}"><i class="fas fa-envelope"></i></a></li>
                                                </ul>
                                            </div>
                                        </div>

                                        <span class="product-o__category">

                                            <a href="{% url 'home:category_filter' slug=i.category.name %}">{{i.category.name|title}}</a></span>

                                        <span class="product-o__name">

                                            <a href="{% url 'home:this_product' id=i.id %}">{{i.name|title}}</a></span>
                                        <div class="product-o__rating gl-rating-style"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>

                                            <span class="product-o__review">({{i.comments}}) {{i.stars}}</span></div>
                                              
                                        <span class="product-o__price">${{i.discount}}
                                                
                                            <span class="product-o__discount">${{i.price}}</span></span>
                                    </div>
                                </div>

                        
  
                                {% endfor  %}
  
                            </div>
                        </div>
                    </div>
                </div>
                <!--====== End - Section Content ======-->
            </div>
            <!--====== End - Section 1 ======-->
        </div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>


  <script type="text/javascript">
    $('#sort-review').change(function(){
$('#comments-form').submit();
        }
        );
    $("#post-form").submit(function(e){
      // prevent from normal form behaviour
          e.preventDefault();
          // serialize the form data  
          var serializedData = $(this).serialize();
          //let target_element = $('#add-html-here');
          $.ajax({
              type : 'POST',
              url :  "{% url 'home:this_product' id=product.id %}",
              data : serializedData,
              success : function(res){
              //reset the form after successful submit
                  $("#post-form")[0].reset();
                     $("#comments-ajax").val('');
                  var html_data=`
                  <div class="review-o u-s-m-b-15">
                    <div class="review-o__info u-s-m-b-8">
                           
                        <span class="review-o__name">${res.comment_user}</span>
                       
                        <span class="review-o__date">${res.comment_date}</span></div>
                    <div class="review-o__rating gl-rating-style u-s-m-b-8">
            
                        <span>(${res.comment_stars} of 5 )</span></div>
                    <p class="review-o__text">${res.comment}</p>
                </div>
                  `;
                let html_1=`${res.comment_count} Review(s)`;
                
                let html_3=`${res.comment_count} Review(s)  (Overall)`;
                let html_4=`${res.comment_count} Review(s)`;
                $("#comments-ajax").append(html_data);
                  $("#counts-1").html(html_1);
                  $("#counts-2").text(res.comment_count);
                  $("#counts-3").html(html_3);
                  $("#counts-4").html(html_4);

              },
              error : function(response){
                  console.log(response)
              }
          });
     });
     $(document).on('click',"#wishlist-add",function(){
        var _vm=$(this);
        var _index=_vm.attr('data-index');
        var _productId=$(".wishlist-add-"+_index).val();
        // Ajax
        $.ajax({
        

            url:"{% url 'home:wishlist_add' %}",
            data:{
                'id':_productId,
                
                },
            dataType:'json',
            beforeSend:function(){
                _vm.attr('disabled',true);
            },
            success:function(res){
            let html_data2=`
            <input class="wishlist-add-${_productId}" type="hidden" value="${_productId}">

            <a id="wishlist"  data-index="${_productId}" data-tooltip="tooltip" data-placement="top"><i  title="{% translate 'Remove From Wishlist' %}" id="fas-heart" class="fas fa-heart"></i>{% translate 'Remove From Wishlist' %}</a>`;
       
            $("#red-heart").html(html_data2);
            _vm.attr('disabled',false);
                        }
                        });
                        // End
                    });    
$(document).on('click',"#wishlist",function(){
    var _vm=$(this);
    var _index=_vm.attr('data-index');
    var _productId=$(".wishlist-add-"+_index).val();
    // Ajax
    $.ajax({
    

        url:"{% url 'home:wishlist_remove' %}",
        data:{
            'id':_productId,         
            
            },
        dataType:'json',
        beforeSend:function(){
            _vm.attr('disabled',true);
        },
        success:function(res){
        let html_data2=`
        <input class="wishlist-add-${_productId}" type="hidden" value="${_productId}">

        <a  id="wishlist-add"  data-index="${_productId}" data-tooltip="tooltip" data-placement="top" ><i  title="{% translate 'Add to Wishlist' %}" id="fas-heart" class="fas fa-heart"></i>{% translate 'Add to Wishlist' %}</a>
        `;
    
        $("#red-heart").html(html_data2);
        _vm.attr('disabled',false);
                    }
                    });
                    // End
                }); 

    
                $(document).on('click',"#ajax-cart",function(){
                    var _vm=$(this);
                    var _index=_vm.attr('data-index');
                    var _productId=$(".product-id-"+_index).val();
                    // Ajax
                    $.ajax({
                    
            
                        url:"{% url 'home:cart_add' %}",
                        data:{
                            'id':_productId,
                            
                            },
                        dataType:'json',
                        beforeSend:function(){
                            _vm.attr('disabled',true);
                        },
                        success:function(res){
                           $("#cart-items").val('');
                                    // Append Element
                                    var _html=`
                               
                                <div  class="card-mini-product">
                                <div class="mini-product">
                                    <div class="mini-product__image-wrapper">
            
                                        <a class="mini-product__link" href="${res.product_url}">
            
                                            <img class="u-img-fluid" src=" ${res.product_image}" alt="${res.product_name}"></a></div>
                                    <div class="mini-product__info-wrapper">
            
                                        <span class="mini-product__category">
            
                                            <a href="${res.product_category_url}">${res.product_category}</a></span>
            
                                        <span class="mini-product__name">
            
                                            <a href="${res.product_url}">${res.product_name}</a></span>
            
                                        <span class="mini-product__quantity">${res.product_quantity} x</span>
            
                                        <span class="mini-product__price">${res.product_price}</span></div>
                                </div>
            
                                <a class="mini-product__delete-link far fa-trash-alt" href="${res.product_remove}"></a>
                            </div>
                            
                                `;
                                let html_2=`$ ${res.total}`;
                            $("#cart-items").append(_html);
                            $("#cart-len-1").text(res.amounts);
                            $("#cart-len-2").text(res.amounts);
                            $("#cart-total").html(html_2);
                            _vm.attr('disabled',false);
                        }
                    });
                    // End
            });
       
$(document).on('click',"#wishlist-same-add",function(){
        var _vm=$(this);
        var _index=_vm.attr('data-index');
        var _productId=$(".wishlist-add-"+_index).val();
        // Ajax
        $.ajax({
        

            url:"{% url 'home:wishlist_add' %}",
            data:{
                'id':_productId,
                
                },
            dataType:'json',
            beforeSend:function(){
                _vm.attr('disabled',true);
            },
            success:function(res){
            let html_data2=`
            <input class="wishlist-add-${_productId}" type="hidden" value="${_productId}">

            <a id="wishlist-same"  data-index="${_productId}" data-tooltip="tooltip" data-placement="top" title="Remove From Wishlist"><i class="fas fa-heart"></i></a>`;
       
            $(".red-heart-"+_productId).html(html_data2);
            _vm.attr('disabled',false);
                        }
                        });
                        // End
                    });    
$(document).on('click',"#wishlist-same",function(){
    var _vm=$(this);
    var _index=_vm.attr('data-index');
    var _productId=$(".wishlist-add-"+_index).val();
    // Ajax
    $.ajax({
    

        url:"{% url 'home:wishlist_remove' %}",
        data:{
            'id':_productId,         
            
            },
        dataType:'json',
        beforeSend:function(){
            _vm.attr('disabled',true);
        },
        success:function(res){
        let html_data2=`
        <input class="wishlist-add-${_productId}" type="hidden" value="${_productId}">

        <a  id="wishlist-same-add"  data-index="${_productId}" data-tooltip="tooltip" data-placement="top" title="Add to Wishlist"><i class="fas fa-heart"></i></a>
        `;
    
        $(".red-heart-"+_productId).html(html_data2);
        _vm.attr('disabled',false);
                    }
                    });
                    // End
                });  
    $(document).on('click',"#ajax-same",function(){
        var _vm=$(this);
        var _index=_vm.attr('data-index');
        var _productId=$(".product-id-"+_index).val();
        // Ajax
        $.ajax({
        

            url:"{% url 'home:cart_add' %}",
            data:{
                'id':_productId,
                
                },
            dataType:'json',
            beforeSend:function(){
                _vm.attr('disabled',true);
            },
            success:function(res){
                $("#cart-items").val('');
                        // Append Element
                        var _html=`
                    
                        <div id='temp-cart-${res.id}'  class="card-mini-product">
                            <div class="mini-product">
                                <div class="mini-product__image-wrapper">
        
                                    <a class="mini-product__link" href="${res.product_url}">
        
                                        <img class="u-img-fluid" src=" ${res.product_image}" alt="${res.product_name}"></a></div>
                                <div class="mini-product__info-wrapper">
        
                                    <span class="mini-product__category">
        
                                        <a href="${res.product_category_url}">${res.product_category}</a></span>
        
                                    <span class="mini-product__name">
        
                                        <a href="${res.product_url}">${res.product_name}</a></span>
        
                                    <span class="mini-product__quantity">${res.product_quantity} x</span>
        
                                    <span class="mini-product__price">$${res.product_price}</span></div>
                            </div>
        
                            <input class="total-remove-cart-${res.id}" type="hidden" value="${res.id}">
        
                            <a id="total-product-remove" value="${res.id}" data-index="${res.id}" class="mini-product__delete-link far fa-trash-alt" ></a>                </div>
                
                
                    `;
                    let html_2=`$ ${res.total}`;
                $("#cart-items").append(_html);
                $("#cart-len-1").text(res.amounts);
                $("#cart-len-2").text(res.amounts);
                $("#cart-total").html(html_2);
                _vm.attr('disabled',false);
            }
        });
        // End
});



  </script>

 

{% endblock %}
