{% extends 'base.html' %}
{% load static %}
{% block content %}
{% load crispy_forms_tags %}

<style type="text/css">

    #ajax-cart{
        padding: 12px;
        margin-top:2px;
        font-size: 13px;
        width: 100%;
        text-align: center;
        margin-right:10%;
        display: block;
        color:#fff;
        background-color:#ff4500;
        
    }
    #ajax-cart:hover{
        cursor:pointer;
    }
    .remove{
        background-color:#ff4500 !important;
    }
    #link{
        color:#fff;
        size:10px;
    }
    #wishlist{
    color:#ff4500;
    }
    #wishlist-add:hover{
        cursor:pointer;
    }
    #wishlist:hover{
        cursor:pointer;
    }
</style>

        <!--====== App Content ======-->
<div class="app-content">
  

            <!--====== Section 1 ======-->
            <div class="u-s-p-y-90">
                <div class="container">
                    <div class="row">
                        {% if products %}
                        <div class="col-lg-3 col-md-12">
                            <div class="shop-w-master">
                                <h1 class="shop-w-master__heading u-s-m-b-30"><i class="fas fa-filter u-s-m-r-8"></i>

                                    <span>FILTERS</span></h1>
                                <div class="shop-w-master__sidebar">
                                    <div class="u-s-m-b-30">
                                        <div class="shop-w shop-w--style">
                                            <div class="shop-w__intro-wrap">
                                                <h1 class="shop-w__h">{{category}}</h1>

                                                <span class="fas fa-minus shop-w__toggle" data-target="#s-category" data-toggle="collapse"></span>
                                            </div>
                                            <div class="shop-w__wrap collapse show" id="s-category">
                                                <ul class="shop-w__category-list gl-scroll">
                                                    {% for i in category.same_category %}
                                                    
                                                    <li class="has-list">

                                                        <a href="{% url 'home:branch_filter' slug=i.child %}">{{i.child}}</a>

                                                        <span class="category-list__text u-s-m-l-6">({{i.my_products.count}})</span>

                                                        <!-- <span class="js-shop-category-span is-expanded fas fa-plus u-s-m-l-6"></span> -->
                                                       
                                                    </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="u-s-m-b-30">
                                        <div class="shop-w shop-w--style">
                                            <div class="shop-w__intro-wrap">
                                                <h1 class="shop-w__h">RATING</h1>

                                                <span class="fas fa-minus shop-w__toggle" data-target="#s-rating" data-toggle="collapse"></span>
                                            </div>
                                            <form id="rate-form" method="POST">
                                                {% csrf_token %}
                                            <div class="shop-w__wrap collapse show" id="s-rating">
                                                <ul   id="rate" class="shop-w__list gl-scroll">
                                                    <li>
                                                        <div class="rating__check">

                                                            <input name="rate" value="5" type="checkbox">
                                                            <div class="rating__check-star-wrap"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                                                        </div>

                                                        <!-- <span class="shop-w__total-text">(2)</span> -->
                                                    </li>
                                                    <li>
                                                        <div class="rating__check">

                                                            <input name="rate" value="4" type="checkbox">
                                                            <div class="rating__check-star-wrap"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i>

                                                                <!-- <span>& Up</span> -->
                                                            </div>
                                                        </div>

                                                        <!-- <span class="shop-w__total-text">(8)</span> -->
                                                    </li>
                                                    <li>
                                                        <div class="rating__check">

                                                            <input name="rate" value="3" type="checkbox">
                                                            <div class="rating__check-star-wrap"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>

                                                                <!-- <span>& Up</span> -->
                                                            </div>
                                                        </div>

                                                        <!-- <span class="shop-w__total-text">(10)</span> -->
                                                    </li>
                                                    <li>
                                                        <div class="rating__check">

                                                            <input name="rate" value="2" type="checkbox">
                                                            <div class="rating__check-star-wrap"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>

                                                                <!-- <span>& Up</span> -->
                                                            </div>
                                                        </div>

                                                        <!-- <span class="shop-w__total-text">(12)</span> -->
                                                    </li>
                                                    <li>
                                                        <div class="rating__check">

                                                            <input name="rate" value="1" type="checkbox">
                                                            <div class="rating__check-star-wrap"><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>

                                                                <!-- <span>& Up</span> -->
                                                            </div>
                                                        </div>

                                                        <!-- <span class="shop-w__total-text">(1)</span> -->
                                                    </li>
                                                </ul>
                                            </div>
                                        </form>
                                        </div>
                                    </div>
                                    <div class="u-s-m-b-30">
                                        <div class="shop-w shop-w--style">
                                            <div class="shop-w__intro-wrap">
                                                <h1 class="shop-w__h">SHIPPING</h1>

                                                <span class="fas fa-minus shop-w__toggle" data-target="#s-shipping" data-toggle="collapse"></span>
                                            </div>
                                            <form id="shipping-form" method="POST">
                                                {% csrf_token %}
                                                 <div class="shop-w__wrap collapse show" id="s-shipping">
                                                <ul class="shop-w__list gl-scroll">
                                                    <li>

                                                        <!--====== Check Box ======-->
                                                        <div class="check-box">

                                                            <input type="checkbox" name="shipping" value="free" id="free-shipping">
                                                            <div class="check-box__state check-box__state--primary">

                                                                <label class="check-box__label" for="free-shipping">Free Shipping</label></div>
                                                        </div>
                                                        <!--====== End - Check Box ======-->
                                                    </li>
                                                </ul>
                                            </div>
                                            </form>
                                           
                                        </div>
                                    </div>
                                    <div class="u-s-m-b-30">
                                        <div class="shop-w shop-w--style">
                                            <div class="shop-w__intro-wrap">
                                                <h1 class="shop-w__h">PRICE</h1>

                                                <span class="fas fa-minus shop-w__toggle" data-target="#s-price" data-toggle="collapse"></span>
                                            </div>
                                            <div class="shop-w__wrap collapse show" id="s-price">
                                                <form id="price-form" method="POST" class="shop-w__form-p">
                                                    {% csrf_token %}
                                                    <div class="shop-w__form-p-wrap">
                                                        <div>
                                                            
                                                            <label for="price-min"></label>

                                                            <input class="input-text input-text--primary-style" name="price_1"  type="text" id="price-min" placeholder="Min"></div>
                                                        <div>

                                                            <label for="price-max"></label>

                                                            <input class="input-text input-text--primary-style" name="price_2" type="text" id="price-max" placeholder="Max"></div>
                                                        <div>

                                                            <button  class="btn btn--icon fas fa-angle-right btn--e-transparent-platinum-b-2" type="submit"></button></div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="u-s-m-b-30">
                                        <div class="shop-w shop-w--style">
                                            <div class="shop-w__intro-wrap">
                                                <h1 class="shop-w__h">MANUFACTURER</h1>

                                                <span class="fas fa-minus shop-w__toggle" data-target="#s-manufacturer" data-toggle="collapse"></span>
                                            </div>
                                            <div class="shop-w__wrap collapse show" id="s-manufacturer">
                                                <form id="mani-form" method="POST">
                                                    {% csrf_token %}
                                                <ul id="id_manufacturer" class="shop-w__list-2" >
                                                        {% for i in mani %}
                                                        <li >
                                                            <div  class="list__content" >
    
                                                                <input  name="manu" value="{{i.name}}"   type="checkbox" >
    
                                                             <span >{{i.name|title}}</span>
                                                               
                                                            </div>
    
                                                            <span class="shop-w__total-text">({{i.my_products.count}})</span>
                                                        </li>
                                                       {% endfor %}
                                                    </ul>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    
                         <div class="u-s-m-b-30"> 
                        <div class="shop-w shop-w--style">
                                            <div class="shop-w__intro-wrap">
                                                <h1 class="shop-w__h">SIZE</h1>

                                                <span class="fas fa-minus collapsed shop-w__toggle" data-target="#s-size" data-toggle="collapse"></span>
                                            </div>
                                            <form  id="size-form" method="POST">
                                                {% csrf_token %}
                                                 <div class="shop-w__wrap collapse" id="s-size">
                                                <ul id="size-id" class="shop-w__list gl-scroll">
                                                    {% for i in sizes %}
                                                    <li  >

                                                        
                                                        <div  class="check-box">

                                                            <input type="checkbox"  name="size" value={{i.name}} >
                                                            <div class="check-box__state check-box__state--primary">

                                                                <label class="check-box__label" for="xs">{{i.name|upper}}</label></div>
                                                        </div>
                                                      

                                                        <span class="shop-w__total-text">({{i.my_products.count}})</span>
                                                    </li>
                                                   {% endfor %}
                                                </ul>
                                            </div>
                                            </form>

                                           
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        <div {% if products %} class="col-lg-9 col-md-12"{% else %} class="col-lg-12 col-md-12" {% endif %} >
                            <div class="shop-p">
                           
                                <div class="shop-p__toolbar u-s-m-b-30">
                                    <div class="shop-p__meta-wrap u-s-m-b-60">

                                        <span class="shop-p__meta-text-1">FOUND {{products.paginator.count}} RESULTS</span>
                                        <div class="shop-p__meta-text-2">

                                            <span>Your Filter:</span>
                                                       <br>
                                                       {% if manu %}
                                                       Manufacturer: <a class="gl-tag btn--e-brand-shadow" href="{% url 'home:manu_session_delete' %}">{{manu}}  <i class="fas fa-times"></i></a>
                                                     {% endif %}
                                                {% if size %}
                                                   Size: <a class="gl-tag btn--e-brand-shadow" href="{% url 'home:size_session_delete' %}">{{size}}  <i class="fas fa-times"></i></a>
                                                 {% endif %}
                                                      {% if rating %}                                                                                                         
                                                      Rate: <div class="gl-tag btn--e-brand-shadow">
                                                    {% with ''|center:loop as range %}
                                                        {% for _ in range %}
                                                        <i class="fas fa-star"> </i>
                                                     
                                                        {% endfor %}
                                                        {%endwith%} <a id="link" href="{% url 'home:rating_session_delete' %}">
                                                                        <i class="fas fa-times"></i>
                                                                    </div>  </a>
                                                        {% endif %}
                                            {% if shipping %}
                                             FREE SHIPING: <a class="gl-tag btn--e-brand-shadow" href="{% url 'home:shipping_delete' %}">{{shipping}}  <i class="fas fa-times"></i></a>
                                           {% endif %}
                                           {% if price_1 %}
                                           PRICE RANGE: <a class="gl-tag btn--e-brand-shadow" href="{% url 'home:price_session_delete' %}">{{price_1}} : {{price_2}}  <i class="fas fa-times"></i></a>
                                          {% endif %}
                           
                                        </div>
                                    </div>
                                    {% if products %}
                                    <div class="shop-p__tool-style">
                                        <div class="tool-style__group u-s-m-b-8">

                                            <span class="js-shop-grid-target is-active">Grid</span>

                                            <span class="js-shop-list-target">List</span></div>
                                        <form id="my-form" method="POST">
                                            {%csrf_token%}
                                            <div class="tool-style__form-wrap">
                                                
                                                <div class="u-s-m-b-8"><select id="show" name="paginat" class="select-box select-box--transparent-b-2">
                                                    <option value="8" {% if paginated == 8 %}selected{% endif %}>Show: 8</option>
                                                    <option value="12"  {% if paginated == 12 %}selected{% endif %}>Show: 12</option>
                                                    <option value="16"  {% if paginated == 16 %}selected{% endif %}>Show: 16</option>
                                                    <option value="28"  {% if paginated == 28 %}selected{% endif %}>Show: 28</option>
                                                </select></div>
                                                <div class="u-s-m-b-8"><select id="select" name="select_filter" class="select-box select-box--transparent-b-2">
                                                        <option  value="1" {% if selected == 1 %}selected{% endif %}>Sort By: Newest Items</option>
                                                        <option  value="2" {% if selected == 2 %}selected{% endif %}>Sort By: Latest Items</option>
                                                        <!-- <option value="3" {% if selected == 3 %}selected{% endif %}>Sort By: Best Selling</option>
                                                        <option  value="4" {% if selected == 4 %}selected{% endif %}>Sort By: Best Rating</option> -->
                                                        <option  value="5"{% if selected == 5 %}selected{% endif %}>Sort By: Lowest Price</option>
                                                        <option  value="6" {% if selected == 6 %}selected{% endif %}>Sort By: Highest Price</option>
                                                    </select></div>
                                            </div>
                                            <!-- <button class="btn btn-primary" type="submit">submit</button> -->
                                        </form>
                                    </div>
                                    {% endif %}
                                </div>
                                
                               
                                <div class="shop-p__collection">
                                    {% if products %}
                                    <div  id="test"class="row is-grid-active">
                                        {% for i in products %}
                                                                
                                        <div class="col-lg-4 col-md-6 col-sm-6">
                                            <div class="product-m" >
                                                <div class="product-m__thumb">
            
                                                    <a class="aspect aspect--bg-grey aspect--square u-d-block" href="{% url 'home:this_product' id=i.id %}">
                                                     
                                                        <img class="aspect__img" src="{{i.image.first.image.url}}" alt=""></a>
                                                       
                                                    <div class="product-m__quick-look">
            
                                                        <a class="fas fa-search" data-modal="modal" data-modal-id=".pro-{{i.id}}" data-tooltip="tooltip" data-placement="top" title="Quick Look"></a></div>
                                                        <div class="product-m__add-cart">
                                                            <input type="hidden" class="product-id-{{i.id}}"  value="{{i.id}}">
                                                        <div class="btn--e-brand " value="{{i.id}}" data-index="{{i.id}}" id="ajax-cart" data-modal="modal" data-modal-id="#add-to-cart-{{i.id}}">Add to Cart</div>
                                                    </div>
                                                </div>
                                                <div class="product-m__content">
                                                    <div class="product-m__category">
            
                                                        <a href="{% url 'home:category_filter' slug=i.category.name %}">{{i.category.name}}</a></div>
                                                    <div class="product-m__name">
                                                        <a href="{% url 'home:this_product' id=i.id %}"> {{i.name|title}}</a></div>
                                                       <div id="empty">
                                                                </div>
                                                        <div class="product-m__rating gl-rating-style">
                                                            {% with ''|center:i.average.average as range %}
                                                            {% for _ in range %}
                                                            <i class="fas fa-star"> </i>
                                                                    {% endfor %}
                                                            {%endwith%} 
                                                            {% if i.average.my_average %}
                                                        <i class="fas fa-star-half-alt"></i>
                                                            {% endif %}
            
                                                        <span class="product-m__review">({{i.average.average|floatformat:1}} of 5)</span>
                                                    </div>
                                                    <div class="product-m__price"> ${{i.discount}}</div><del class="pd-detail__del">${{i.price}}</del>
                                                    <div class="product-m__hover">
                                                        <div class="product-m__preview-description">
            
                                                            <!-- <span>{{i.details}}</span> -->
                                                        </div>
                                                        <div class="product-m__wishlist">
                                                           
                                                            <div class="red-heart-{{i.id}}">
                                                            
                                                               
                                                            {% if  i in wishlist.products.all %}
                                                            <input class="wishlist-add-{{i.id}}" type="hidden" value="{{i.id}}">

                                                            <div id="wishlist" class="fas fa-heart" data-index="{{i.id}}" data-tooltip="tooltip" data-placement="top" title="Remove From Wishlist"></div>
                                                       
                                                          {% else %}
                                                          <input class="wishlist-add-{{i.id}}" type="hidden" value="{{i.id}}">
                                                          <div  id="wishlist-add" class="fas fa-heart" data-index="{{i.id}}" data-tooltip="tooltip" data-placement="top" title="Add to Wishlist"></div>
                                                       
                                                            {% endif %}
                                                       </div>
                                                        </div>

                                                          
                                                        </div>
                                                    </div>
                                            </div>
                                        </div>

        <!--====== Quick Look Modal ======-->
        <div class="modal fade pro-{{i.id}}" id="quick-look">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content modal--shadow">

                    <button class="btn dismiss-button fas fa-times" type="button" data-dismiss="modal"></button>
                    <div class="modal-body">
                        <div class="row">
                           
                            <div class="col-lg-5">

                                <!--====== Product Breadcrumb ======-->
                                <div class="pd-breadcrumb u-s-m-b-30">
                                    <ul class="pd-breadcrumb__list">
                                        <li class="has-separator">

                                            <a href="{% url 'home:home' %}">Home</a></li>
                                        <li class="has-separator">

                                            <a href="{% url 'home:category_filter' slug=i.category.name %}">{{i.category.name|title}}</a></li>
                                        <li class="has-separator">

                                            <a href="{% url 'home:category_filter' slug=i.category.name %}">{{i.branch.child|title}}</a></li>
                                        <li class="is-marked">

                                            <a href="{% url 'home:this_product' id=i.id %}">{{i.name|title}}</a></li>
                                    </ul>
                                </div>
                                <!--====== End - Product Breadcrumb ======-->


                                <!--====== Product Detail ======-->
                                <div class="pd u-s-m-b-30">
                                    <div class="pd-wrap">
                                        <div id="js-product-detail-modal">
                                            <div>

                                                <img class="u-img-fluid" src="{{i.image.first.image.url}}" alt=""></div>
                                          
                                        </div>
                                    </div>
                                    <div class="u-s-m-t-15">
                                        <div id="js-product-detail-modal-thumbnail">
                                            <!-- <div>

                                                <img class="u-img-fluid" src="{% static 'images/product/product-d-1.jpg' %}" alt=""></div> -->
                              
                                        </div>
                                    </div>
                                </div>
                                <!--====== End - Product Detail ======-->
                            </div>
                            <div class="col-lg-7">

                                <!--====== Product Right Side Details ======-->
                                <div class="pd-detail">
                                    <div>

                                        <span class="pd-detail__name">{{i.name|title}}</span></div>
                                    <div>
                                        <div class="pd-detail__inline">

                                            <span class="pd-detail__price">${{i.discount}}</span>
                                       
                                            <span class="pd-detail__discount">({{i.discount_percent}}% OFF)</span><del class="pd-detail__del">${{i.price}}</del></div>
                                           
                                        </div>
                                    <div class="u-s-m-b-15">
                                        <div class="pd-detail__rating gl-rating-style">
                                            {% with ''|center:i.average.average as range %}
                                            {% for _ in range %}
                                            <i class="fas fa-star"> </i>
                                                    {% endfor %}
                                            {%endwith%} 
                                            {% if i.average.my_average %}
                                        <i class="fas fa-star-half-alt"></i>
                                            {% endif %}
                                           

                                            <span class="pd-detail__review u-s-m-l-4">

                                                <a href="{% url 'home:this_product' id=i.id %}">{{i.comments}} Reviews</a></span></div>
                                    </div>
                                    <div class="u-s-m-b-15">
                                        <div class="pd-detail__inline">

                                            <span class="pd-detail__stock">{{i.stock}} in stock</span>

                                            <span class="pd-detail__left">Only 2 left</span></div>
                                    </div>
                                    <div class="u-s-m-b-15">

                                        <!-- <span class="pd-detail__preview-desc">{{i.details}}</span> -->
                                    </div>
                                    <div class="u-s-m-b-15">
                                        <div class="pd-detail__inline">

                                            <div class="red-heart-{{i.id}}">
                                                            
                                                               
                                                {% if  i in wishlist.products.all %}
                                                <input class="wishlist-add-{{i.id}}" type="hidden" value="{{i.id}}">

                                                <div id="wishlist" class="fas fa-heart" data-index="{{i.id}}" data-tooltip="tooltip" data-placement="top" title="Remove From Wishlist"></div>
                                           
                                              {% else %}
                                              <input class="wishlist-add-{{i.id}}" type="hidden" value="{{i.id}}">
                                              <div  id="wishlist-add" class="fas fa-heart" data-index="{{i.id}}" data-tooltip="tooltip" data-placement="top" title="Add to Wishlist"></div>
                                           
                                                {% endif %}
                                           </div>
                                    </div>
                                    </div>
                                    <div class="u-s-m-b-15">
                                        <div class="pd-detail__inline">

                                            <span class="pd-detail__click-wrap"><i class="far fa-envelope u-s-m-r-6"></i>

                                                <a href="signin.html">Email me When the price drops</a>

                                                <span class="pd-detail__click-count">(20)</span></span></div>
                                    </div>
                                    <div class="u-s-m-b-15">
                                        <ul class="pd-social-list">
                                            <li>

                                                <a class="s-fb--color-hover" href="#"><i class="fab fa-facebook-f"></i></a></li>
                                            <li>

                                                <a class="s-tw--color-hover" href="#"><i class="fab fa-twitter"></i></a></li>
                                            <li>

                                                <a class="s-insta--color-hover" href="#"><i class="fab fa-instagram"></i></a></li>
                                            <li>

                                                <a class="s-wa--color-hover" href="#"><i class="fab fa-whatsapp"></i></a></li>
                                            <li>

                                                <a class="s-gplus--color-hover" href="#"><i class="fab fa-google-plus-g"></i></a></li>
                                        </ul>
                                    </div>
                                    <div class="u-s-m-b-15">
                                        <form class="pd-detail__form" method="POST" action="{% url 'home:quantity_add' id=i.id %}">
                                           {% csrf_token %}
                                            <div class="pd-detail-inline-2">
                                                <div class="u-s-m-b-15">

                                                    <!--====== Input Counter ======-->
                                                    <div class="input-counter">

                                                        <span class="input-counter__minus fas fa-minus"></span>

                                                        <input name="quantity" class="input-counter__text input-counter--text-primary-style" type="text" value="1" data-min="1" data-max="1000">

                                                        <span class="input-counter__plus fas fa-plus"></span></div>
                                                    <!--====== End - Input Counter ======-->
                                                </div>
                                                <div class="u-s-m-b-15">

                                                    <button class="btn btn--e-brand-b-2" type="submit">Add to Cart</button></div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="u-s-m-b-15">

                                        <span class="pd-detail__label u-s-m-b-8">Product Policy:</span>
                                        <ul class="pd-detail__policy-list">
                                            <li><i class="fas fa-check-circle u-s-m-r-8"></i>

                                                <span>Buyer Protection.</span></li>
                                            <li><i class="fas fa-check-circle u-s-m-r-8"></i>

                                                <span>Full Refund if you don't receive your order.</span></li>
                                            <li><i class="fas fa-check-circle u-s-m-r-8"></i>

                                                <span>Returns accepted if product not as described.</span></li>
                                        </ul>
                                    </div>
                                </div>
                                <!--====== End - Product Right Side Details ======-->
                            </div>
                           
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--====== End - Quick Look Modal ======-->
<!--====== Add to Cart Modal ======-->
<div class="modal fade" id="add-to-cart-{{i.id}}">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content modal-radius modal-shadow">

            <button class="btn dismiss-button fas fa-times" type="button" data-dismiss="modal"></button>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-6 col-md-12">
                        <div class="success u-s-m-b-30">
                            <div class="success__text-wrap"><i class="fas fa-check"></i>

                                <span>Item is added successfully!</span></div>
                            <div class="success__img-wrap">

                                <img class="u-img-fluid" src="{{i.image.first.image.url}}" alt=""></div>
                            <div class="success__info-wrap">

                                <span class="success__name">{{i.name|title}}</span>

                                <span class="success__quantity">Quantity: 1</span>

                                <span class="success__price">${{i.price}}</span></div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-12">
                        <div class="s-option">

                            <span class="s-option__text">1 item (s) in your cart</span>
                            <div class="s-option__link-box">

                                <a class="s-option__link btn--e-white-brand-shadow" data-dismiss="modal">CONTINUE SHOPPING</a>

                                <a class="s-option__link btn--e-white-brand-shadow" href="{% url 'home:cart' %}">VIEW CART</a>

                                {% if request.user.is_authenticated %}
                                <a class="s-option__link btn--e-brand-shadow" href="{% url 'home:order' cart.id %}">PROCEED TO CHECKOUT</a>
                            </div>
                                {% else %}
                                <a class="s-option__link btn--e-brand-shadow" href="{% url 'account_login' %}">PROCEED TO CHECKOUT</a>
                            </div>

                                {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--====== End - Add to Cart Modal ======-->

                                        {% endfor %}
                                    </div>
                                    {% else %}
                                <h1 style="text-align:center;">Sorry we didn't find what you want</h1>
                                    {% endif %}
                                </div>
                                <div class="u-s-p-y-60">

                                    <!--====== Pagination ======-->
                                    <ul class="shop-p__pagination">
                                        {% if products.has_provious %}
                                        <li>

                                       <a class="fas fa-angle-left" href="?page={{ products.previous_page_number }}"></a></li>
                                       {% endif  %}
                                       {% for i in products.paginator.page_range %}
                                       {% if products.number == i %}
                                       <li class="is-active"><a href="?page={{i}}">{{i}}</a></li>
                                       {% else %}
                                       <li><a href="?page={{i}}">{{i}}</a></li>

                                       {% endif %}
                                     {% endfor %}
                               
                                       {% if products.has_next %}
                                   <li>

                                       <a class="fas fa-angle-right" href="?page={{ products.next_page_number }}"></a></li>
                                       {% endif %}
                                    </ul>
                                    <!--====== End - Pagination ======-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--====== End - Section 1 ======-->
</div>
        <!--====== End - App Content ======-->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
 <script type="text/javascript">
$('#my-color').click(function(){
$('#color-form').submit()
                });
$('#free-shipping').click(function(){
$('#shipping-form').submit()
                    });
$('#size-id').click(function(){
$('#size-form').submit()
                        });
$('#id_manufacturer').click(function(){
    $('#mani-form').submit()
                            });
                            
$('#show').change(function(){
$('#my-form').submit()
                        });
$('#select').change(function(){
    $('#my-form').submit()
                });

        $('#rate').click(function(){
            $('#rate-form').submit();
                    }
                    );

                    $(document).on('click',"#ajax-cart",function(){
                        var _vm=$(this);
                        var _index=_vm.attr('data-index');
                        var _productId=$(".product-id-"+_index).val();
                        // Ajax
                        $.ajax({
                        
            
                            url:"{% url 'home:cart_add' %}",
                            data:{
                                'id':_productId,
                                
                                },
                            dataType:'json',
                            beforeSend:function(){
                                _vm.attr('disabled',true);
                            },
                            success:function(res){
                                $("#cart-items").val('');
                                // Append Element
                                var _html=`
                           
                                <div id='temp-cart-${res.id}'  class="card-mini-product">
                                    <div class="mini-product">
                                        <div class="mini-product__image-wrapper">
                
                                            <a class="mini-product__link" href="${res.product_url}">
                
                                                <img class="u-img-fluid" src=" ${res.product_image}" alt="${res.product_name}"></a></div>
                                        <div class="mini-product__info-wrapper">
                
                                            <span class="mini-product__category">
                
                                                <a href="${res.product_category_url}">${res.product_category}</a></span>
                
                                            <span class="mini-product__name">
                
                                                <a href="${res.product_url}">${res.product_name}</a></span>
                
                                            <span class="mini-product__quantity">${res.product_quantity} x</span>
                
                                            <span class="mini-product__price">${res.product_price}</span></div>
                                    </div>
                
                                    <input class="total-remove-cart-${res.id}" type="hidden" value="${res.id}">
                
                                    <a id="total-product-remove" value="${res.id}" data-index="${res.id}" class="mini-product__delete-link far fa-trash-alt" ></a>                </div>
                        
                            `;
                               let html_2=`$ ${res.total}`;
                            $("#cart-items").append(_html);
                                $("#cart-len-1").text(res.amounts);
                                $("#cart-len-2").text(res.amounts);
                                $("#cart-total").html(html_2);
                                _vm.attr('disabled',false);
                            }
                        });
                        // End
                });
                $(document).on('click',"#wishlist-add",function(){
                        var _vm=$(this);
                        var _index=_vm.attr('data-index');
                        var _productId=$(".wishlist-add-"+_index).val();
                        // Ajax
                        $.ajax({
                        
            
                            url:"{% url 'home:wishlist_add' %}",
                            data:{
                                'id':_productId,
                                
                                },
                            dataType:'json',
                            beforeSend:function(){
                                _vm.attr('disabled',true);
                            },
                            success:function(res){
                            let html_data2=`
                            <input class="wishlist-add-${_productId}" type="hidden" value="${_productId}">
            
                            <div id="wishlist" class="fas fa-heart" data-index="${_productId}" data-tooltip="tooltip" data-placement="top" title="Remove From Wishlist"></div>`;
                       
                            $(".red-heart-"+_productId).html(html_data2);
                            _vm.attr('disabled',false);
                                        }
                                        });
                                        // End
                                    });    
                $(document).on('click',"#wishlist",function(){
                    var _vm=$(this);
                    var _index=_vm.attr('data-index');
                    var _productId=$(".wishlist-add-"+_index).val();
                    // Ajax
                    $.ajax({
                    
            
                        url:"{% url 'home:wishlist_remove' %}",
                        data:{
                            'id':_productId,         
                            
                            },
                        dataType:'json',
                        beforeSend:function(){
                            _vm.attr('disabled',true);
                        },
                        success:function(res){
                        let html_data2=`
                        <input class="wishlist-add-${_productId}" type="hidden" value="${_productId}">
            
                        <div  id="wishlist-add" class="fas fa-heart" data-index="${_productId}" data-tooltip="tooltip" data-placement="top" title="${_productId}Add to Wishlist"></div>
                        `;
                    
                        $(".red-heart-"+_productId).html(html_data2);
                        _vm.attr('disabled',false);
                                    }
                                    });
                                    // End
                                });  
$("#").change(function () {
    const productId = $(this).val();  // get the selected subject ID from the HTML dropdown list 
    $.ajax({                       // initialize an AJAX request
        type: "POST",
        url: '{% url "home:products" %}',
        data: {
            'product': productId,       // add the country id to the POST parameters
            'csrfmiddlewaretoken':$('input[name=csrfmiddlewaretoken]').val(),
        },
        success: function (data) {   // `data` is from `get_topics_ajax` view function
            
            let html_data2=`
                                    `
            ;
            data.forEach(function (data) {
                html_data2 += `
                
            
            
                `
            });
            $("#test").html(html_data2);
            
        }
    });
});

            </script> 

{% endblock %}
